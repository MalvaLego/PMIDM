package com.example.appfinanzas

import android.os.Bundle
import android.widget.Button
import android.widget.TextView
import androidx.activity.enableEdgeToEdge
import androidx.appcompat.app.AppCompatActivity
import androidx.appcompat.widget.AppCompatButton
import androidx.core.view.ViewCompat
import androidx.core.view.WindowInsetsCompat
import com.google.android.material.floatingactionbutton.FloatingActionButton
import com.google.android.material.slider.RangeSlider
import com.google.android.material.slider.Slider

class MainActivity : AppCompatActivity() {

    lateinit var tvAlquiler: TextView
    lateinit var tvCoche: TextView
    lateinit var tvGastosVivienda: TextView
    lateinit var btnGastosViviendaMas: FloatingActionButton
    lateinit var btnGastosViviendaMenos: FloatingActionButton
    lateinit var tvGastosComida: TextView
    lateinit var btnGastosComidaMas: FloatingActionButton
    lateinit var btnGastosComidaMenos: FloatingActionButton
    lateinit var btn100Euros: AppCompatButton
    lateinit var btn200Euros: AppCompatButton
    lateinit var btn300Euros: AppCompatButton
    lateinit var btn400Euros: AppCompatButton
    lateinit var tvGastosTotal: TextView
    lateinit var rsAlquiler: RangeSlider
    lateinit var rsCoche: RangeSlider

    var alquilerfloat:Float= 200.0F
    var gastoAlquiler=0
    var cochefloat:Float= 200.0F
    var GastosVivienda=0
    var GastosComida=0
    var gastoTotal=0

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        enableEdgeToEdge()
        setContentView(R.layout.activity_main)
        initComponents();
        initListeners();
        inicio();

        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main)) { v, insets ->
            val systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars())
            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom)
            insets
        }
    }

    private fun initComponents(){
        tvAlquiler = findViewById(R.id.tvAlquiler);
        tvCoche = findViewById(R.id.tvCoche);
        tvGastosVivienda = findViewById(R.id.tvGastosVivienda);
        btnGastosViviendaMas = findViewById(R.id.btnGastosViviendaMas);
        btnGastosViviendaMenos = findViewById(R.id.btnGastosViviendaMenos);
        tvAlquiler = findViewById(R.id.tvAlquiler);
        tvGastosComida = findViewById(R.id.tvGastosComida);
        btnGastosComidaMas = findViewById(R.id.btnGastosComidaMas);
        btnGastosComidaMenos = findViewById(R.id.btnGastosComidaMenos);
        btn100Euros = findViewById(R.id.btn100Euros);
        btn200Euros = findViewById(R.id.btn200Euros);
        btn300Euros = findViewById(R.id.btn300Euros);
        btn400Euros = findViewById(R.id.btn400Euros);
        tvGastosTotal = findViewById(R.id.tvGastosTotal);
        rsAlquiler= findViewById(R.id.rsAlquiler)
        rsCoche= findViewById(R.id.rsCoche)

    }

    private fun initListeners(){
        rsAlquiler.addOnChangeListener { _, value, _ ->
            if (gastoAlquiler!=0){
                gastoTotal=gastoTotal-gastoAlquiler
                gastoAlquiler=0
            }
            alquilerfloat=value
            tvAlquiler.text=alquilerfloat.toInt().toString()
            gastoAlquiler=alquilerfloat.toInt()
            gastoTotal=gastoTotal+gastoAlquiler
            sumaTotal()
        }

        rsCoche.addOnChangeListener { _, value, _ ->
            cochefloat=value
            tvCoche.text=cochefloat.toString()
            sumaTotal()
        }

        btnGastosViviendaMas.setOnClickListener(){
            numeroPersonas=numeroPersonas+1
            tvNumeroPersonas.text="Personas: "+numeroPersonas.toString()
            gastoTotal=gastoTotal+120
            gastoPersonas=gastoPersonas+120
            tvGastosPersonas.text=gastoPersonas.toString()+" euros"
            sumaTotal()
        }

        btnGastosViviendaMenos.setOnClickListener(){
            if (numeroPersonas>0){
                numeroPersonas=numeroPersonas-1
                tvNumeroPersonas.text="Personas: "+numeroPersonas.toString()
                gastoTotal=gastoTotal-120
                gastoPersonas=gastoPersonas-120
                tvGastosPersonas.text=gastoPersonas.toString()+" euros"
                sumaTotal()
            }
        }

        btnGastosComidaMas.setOnClickListener(){
            gastoTotal=gastoTotal+5
        }

        btnGastosComidaMas.setOnClickListener(){
            gastoTotal=gastoTotal-5
        }



    }




    private fun inicio(){


    }






    private fun sumaTotal() {
        tvGastosTotal.text="Gastos total: "+gastoTotal
    }


}
